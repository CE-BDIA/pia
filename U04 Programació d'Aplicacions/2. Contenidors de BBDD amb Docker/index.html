
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../1.%20Aplicacions%20clients%20amb%20Flet/">
      
      
        <link rel="next" href="../3.%20Peticions%20HTTP.%20API-REST/">
      
      
      <link rel="icon" href="../../img/jaume.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>2. Contenidors. Bases de Dades - Programació d'Intel·ligència Artificial - CE Big Data i IA</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-que-es-docker" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../.." title="Programació d&#39;Intel·ligència Artificial - CE Big Data i IA" class="md-header__button md-logo" aria-label="Programació d'Intel·ligència Artificial - CE Big Data i IA" data-md-component="logo">
      
  <img src="../../img/jaume.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Programació d'Intel·ligència Artificial - CE Big Data i IA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2. Contenidors. Bases de Dades
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Programació d&#39;Intel·ligència Artificial - CE Big Data i IA" class="md-nav__button md-logo" aria-label="Programació d'Intel·ligència Artificial - CE Big Data i IA" data-md-component="logo">
      
  <img src="../../img/jaume.png" alt="logo">

    </a>
    Programació d'Intel·ligència Artificial - CE Big Data i IA
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examens
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Examens
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examens/1a 23-24/PreExamenPIA_2024.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1a 23-24
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 1. Introducció a la Programació
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Unitat 1. Introducció a la Programació
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U01%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/01_Algorismes_Llenguatges/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Algorismes i llenguatges
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U01%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/Exercici/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Exercici pràctic
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 2. El llenguatge Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Unitat 2. El llenguatge Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/01_Entorns_i_projectes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Preparació de l'entorn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/02_Tipus_Variables_Operadors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Tipus de Dades. Operadors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/03_Estructures_de_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Estructures de control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/04_Funcions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Funcions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/05_Estructures_de_dades/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Estructures de dades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/06_POO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Programació orientada a objectes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/07_Projecte/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Projecte
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/08_ExerciciPreProjecte/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Exercici pre projecte guiat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U02%20Python/09_Tractament_de_fitxer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Annex I - Tractament de fitxers i carpetes amb python
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 3. Python aplicat al Big Data i Intel·ligencia Artificial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Unitat 3. Python aplicat al Big Data i Intel·ligencia Artificial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Teoria
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Teoria
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03%20Python%20aplicat%20al%20Big%20Data%20i%20Intel%C2%B7ligencia%20Artificial/0.%20Index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introducció
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03%20Python%20aplicat%20al%20Big%20Data%20i%20Intel%C2%B7ligencia%20Artificial/1.%20NumPy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Manipulació de Dades amb Numpy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/02_Pandas.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Manipulació de Dades amb Pandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/03_Matplotlib-Seaborn.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Visualització de dades amb Matplotlib i Seaborn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/04_Sklearn.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Introducció al Machine Learning amb Scikit-Learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/05_Keras.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Introducció al DeepLearning amb Keras
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03%20Python%20aplicat%20al%20Big%20Data%20i%20Intel%C2%B7ligencia%20Artificial/06_Reutilitzant_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Reutilizant models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tasques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Tasques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. NumPy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            2. NumPy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/numpy/01_numpy.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Activitats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1_2" id="__nav_4_2_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. Pràctiques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            2. Pràctiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/numpy/02_mario.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Mario
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/numpy/03_derivades.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Derivades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/numpy/04_vi.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Vi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/numpy/05_KNN.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. KNN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03%20Python%20aplicat%20al%20Big%20Data%20i%20Intel%C2%B7ligencia%20Artificial/exercicis/numpy/Soroll_Impulsiu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Soroll Impulsiu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/numpy/06_sobel.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Sobel
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3. Pandas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            3. Pandas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2_1" id="__nav_4_2_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1. Activitats
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            1. Activitats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/01_creacio.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Creacio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/02_indexacio_seleccio_assignacio.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Indexació, Selecció i Assignació
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/03_resum_mapatge.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Resum i mapatge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/04_agrupament_i_ordenacio.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Agrupaments i ordenació
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/05_tipus_de_dades_i_valors_nulls.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Dades i valors nuls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/06_renombrat_i_combinacio.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Renombrat i combinació
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2_2" id="__nav_4_2_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. Pràctiques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            2. Pràctiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/01_practica_vendes.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Vendes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/pandas/02_practica_dades_categoriques.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Dades categòriques
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    4. Matplotlib i Seaborn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            4. Matplotlib i Seaborn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3_1" id="__nav_4_2_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1. Activitats
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            1. Activitats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/seaborn/01_linecharts.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Gràfics de línies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/seaborn/02_bars_heatmaps.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Gràfics de barres i mapes de calor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/seaborn/03_scatters.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Gràfics de dispersió
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/seaborn/04_distributions.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Distibucions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4" >
        
          
          <label class="md-nav__link" for="__nav_4_2_4" id="__nav_4_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    5. Sklearn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_4">
            <span class="md-nav__icon md-icon"></span>
            5. Sklearn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_4_1" id="__nav_4_2_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1. Activitats
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            1. Activitats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/sklearn/01_model.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Contrucció del model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/sklearn/02_validacio.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Validació del model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_4_2" id="__nav_4_2_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. Pràctiques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            2. Pràctiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/sklearn/03_comparacio_de_models.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Comparació de models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/sklearn/04_overfitting_underfitting.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Ajust de models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_5" >
        
          
          <label class="md-nav__link" for="__nav_4_2_5" id="__nav_4_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    6. Keras
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_5">
            <span class="md-nav__icon md-icon"></span>
            6. Keras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_5_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_5_1" id="__nav_4_2_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1. Activitats
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_5_1">
            <span class="md-nav__icon md-icon"></span>
            1. Activitats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/keras/01_underfitting_overfitting.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Subajust i sobreajust - Parada anticipada
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/keras/02_dropout.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Abandonament
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/keras/03_batch_normalization.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Normalització de lots
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_5_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_5_2" id="__nav_4_2_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2. Pràctiques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            2. Pràctiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/keras/04_regression.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Xarxes Neuronals - Regressió
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/keras/05_classification.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Xarxes Neuronals - Classificació
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03 Python aplicat al Big Data i Intel·ligencia Artificial/exercicis/keras/06_sklearn_vs_keras.ipynb" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Algoritmes clàssics front a xarxes neuronals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U03%20Python%20aplicat%20al%20Big%20Data%20i%20Intel%C2%B7ligencia%20Artificial/exercicis/keras/07_save_and_load/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Guardat i càrrega de models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 4. Programació d'aplicacions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Unitat 4. Programació d'aplicacions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20Aplicacions%20clients%20amb%20Flet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Programació d'aplicacions client amb Flet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    2. Contenidors. Bases de Dades
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2. Contenidors. Bases de Dades
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-que-es-docker" class="md-nav__link">
    <span class="md-ellipsis">
      1. Què és Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Què és Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-installacio" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Instal·lació
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-contenidors-individuals" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. Contenidors Individuals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-creant-contenidors" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Creant contenidors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-crear-els-nostres-contenidors-dockerfile-i-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Crear els nostres contenidors Dockerfile i docker-compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      1.5. Dockerfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      1.6. docker-compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-contenidors-de-bbdd-amb-mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      1.7. Contenidors de BBDD amb mongoDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      2. mongoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. mongoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-json-i-bson" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. JSON i BSON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-importar-i-exportar-colleccions" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Importar i exportar col·leccions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-inserir-documents" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Inserir documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-consultes-de-documents" class="md-nav__link">
    <span class="md-ellipsis">
      2.4. Consultes de documents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.4. Consultes de documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241-ordenacio" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.1. Ordenació
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-actualitzacions" class="md-nav__link">
    <span class="md-ellipsis">
      2.5. Actualitzacións
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-eliminar-bases-de-dades" class="md-nav__link">
    <span class="md-ellipsis">
      2.6. Eliminar bases de dades
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-pymongo-treball-amb-mongodb-des-de-python" class="md-nav__link">
    <span class="md-ellipsis">
      2.7. pymongo: treball amb mongoDB des de Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mongoengine" class="md-nav__link">
    <span class="md-ellipsis">
      3. mongoengine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. mongoengine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-caracteristiques-principals" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Característiques principals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-connectant-en-la-bbdd" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Connectant en la BBDD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-definint-les-nostres-classesdocumnets" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Definint les nostres classes/Documnets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-annex-protegint-dades-sensibles-els-arxius-env" class="md-nav__link">
    <span class="md-ellipsis">
      4. Annex. Protegint dades sensibles. Els arxius .env
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Annex. Protegint dades sensibles. Els arxius .env">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-per-que-utilitzar-arxius-env" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Per què utilitzar arxius .env?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-com-utilitzar-arxius-env-amb-python" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Com utilitzar arxius .env amb Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%20Peticions%20HTTP.%20API-REST/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Peticions HTTP. API REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.%20Servidors%20amb%20Flask/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Servidors amb Flask
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.%20Practiques/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Pràctiques
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 5. Programació d'aplicacions d'IA
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Unitat 5. Programació d'aplicacions d'IA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U05%20Programaci%C3%B3%20d%27Apps%20d%27IA/01_AzureTextAnalytics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Azure Text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U05%20Programaci%C3%B3%20d%27Apps%20d%27IA/02_FaceDetection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Azure Face
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U05%20Programaci%C3%B3%20d%27Apps%20d%27IA/03_ComputerVision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Computer Vision
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U05%20Programaci%C3%B3%20d%27Apps%20d%27IA/04_Practiques/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Pràctiques
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unitat 6. Convergència tecnològica
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Unitat 6. Convergència tecnològica
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U06%20Convergencia%20tecnologica/01_OpenCV_Basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Computer Vision
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U06%20Convergencia%20tecnologica/02_CapturarImatges/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Capturar imatges
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../U06%20Convergencia%20tecnologica/03_Deteccio_facial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Detecció facial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Informació general
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Informació general
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../info/guia_didactica/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guia didàctica
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-que-es-docker" class="md-nav__link">
    <span class="md-ellipsis">
      1. Què és Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Què és Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-installacio" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Instal·lació
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-contenidors-individuals" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. Contenidors Individuals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-creant-contenidors" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Creant contenidors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-crear-els-nostres-contenidors-dockerfile-i-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Crear els nostres contenidors Dockerfile i docker-compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      1.5. Dockerfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      1.6. docker-compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-contenidors-de-bbdd-amb-mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      1.7. Contenidors de BBDD amb mongoDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      2. mongoDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. mongoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-json-i-bson" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. JSON i BSON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-importar-i-exportar-colleccions" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Importar i exportar col·leccions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-inserir-documents" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Inserir documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-consultes-de-documents" class="md-nav__link">
    <span class="md-ellipsis">
      2.4. Consultes de documents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.4. Consultes de documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241-ordenacio" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.1. Ordenació
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-actualitzacions" class="md-nav__link">
    <span class="md-ellipsis">
      2.5. Actualitzacións
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-eliminar-bases-de-dades" class="md-nav__link">
    <span class="md-ellipsis">
      2.6. Eliminar bases de dades
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-pymongo-treball-amb-mongodb-des-de-python" class="md-nav__link">
    <span class="md-ellipsis">
      2.7. pymongo: treball amb mongoDB des de Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mongoengine" class="md-nav__link">
    <span class="md-ellipsis">
      3. mongoengine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. mongoengine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-caracteristiques-principals" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Característiques principals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-connectant-en-la-bbdd" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Connectant en la BBDD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-definint-les-nostres-classesdocumnets" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Definint les nostres classes/Documnets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-annex-protegint-dades-sensibles-els-arxius-env" class="md-nav__link">
    <span class="md-ellipsis">
      4. Annex. Protegint dades sensibles. Els arxius .env
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Annex. Protegint dades sensibles. Els arxius .env">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-per-que-utilitzar-arxius-env" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Per què utilitzar arxius .env?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-com-utilitzar-arxius-env-amb-python" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Com utilitzar arxius .env amb Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>2. Contenidors. Bases de Dades</h1>

<h2 id="1-que-es-docker">1. Què és <code>Docker</code></h2>
<p><img alt="Docker" src="../img/Docker_logo.png" /></p>
<p><code>Docker</code> (segons la wikipèdia) és un projecte de codi obert que automatitza el desplegment d’aplicacions dins de contenidors de programari, i proporciona una capa addicional d’abstracció i automatització de virtualització d’aplicacions en múltiples sistemes operatius. Docker fa ús de les característiques d’aïllament de recursos del nucli de Linux, tals com els cgroups i els namespaces que permeten que contenidors independents s’executen dins una mateixa instància de Linux, evitant la sobrecàrrega d’iniciar i mantenir màquines virtuals.</p>
<p>Els principals avantatges de l’ús de contenidors són:</p>
<ul>
<li>La <strong>flexibilitat</strong>, ja que fins i tot les aplicacions més complexes poden incloure’s als contenidors.</li>
<li>La <strong>poca càrrega</strong> que suposen per al sistema,al compartir el mateix kernel que l’amfitrió.</li>
<li>La possibilitat de desplegar <strong>actualitzacions en calent</strong>.</li>
<li>La <strong>portabilitat</strong>, ja que es poden desenvolupar localment, desplegar al núvol i llançar-los en qualsevol lloc.</li>
<li><strong>L’escalabilitat</strong>, ja que permet incrementar automàticament rèpliques dels contenidors,</li>
<li>Els serveis en contenidors poden apilar-se <code>on the fly</code></li>
</ul>
<p>Al llarg del document parlarem sobre <strong>imatges i contenidors</strong>, pel que convé aclarir aquests conceptes.</p>
<ul>
<li>Una <strong>imatge</strong> és un paquet executable que inclou tot allò necessari per executar una aplicació: el codi, l’entorn d’execució, llibreries, variables d’entorn i fitxers de configuració. Aquesta imatge sempre roman fixa i immutable, a menys que la creem de nou.</li>
<li>Un <strong>contenidor</strong>, per la seua banda és una instància d’una imatge en execució: allò que es crea quan posem en marxa una imatge. Podríem dir que un contenidor és a una imatge el que un procés a un programa. El contenidor varia al llarg de la seua vida.</li>
</ul>
<details class="tip" open="open">
<summary>Recordatori</summary>
<p>Si <code>procés==programa en execució</code> llavors <code>contenidor==imatge en execució</code></p>
</details>
<h3 id="11-installacio">1.1. Instal·lació</h3>
<p>No anem a entrar en detall però cal tenir instal·la el subsistema Docker a la nosta màquina nativa (anomenat <em>Docker engine</em>) i podeu trobar tota la documentació ací <a href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a>. Consideracions:</p>
<ul>
<li>Hem de configurar el sistema per a que el dimoni o servei de Docker arranque amb el sistema, o l'hem d'arrancar cada cop que ho necessitem.</li>
<li>Podem afegir eines gràfiques per a la gestió de contenidors ja creats.</li>
</ul>
<h3 id="12-contenidors-individuals">1.2. Contenidors Individuals</h3>
<p>Les imatges precreades de Docker estan emmagatzemades al que es coneix com el <code>Docker-hub</code> accessible desde <a href="https://hub.docker.com">https://hub.docker.com</a>. Les imatges estan alli emmagatzemades, i per a fer-les servir, òbviament hem de descarregar-les.</p>
<p>Un cop descarregades (el que es coneix com fer un <code>pull</code>) les imatges es guardaran a la cache del nostre equip, per si es necessiten més endavant per a fer nous contenidors.</p>
<details class="note" open="open">
<summary>Quan i com baixar les imatges</summary>
<p>Realment no cal baixar les imatges per a desprès fer un contenidor, ja que <code>docker</code>, si no troba la imatge en local, automàticament farà el pull i la descarregarà.</p>
</details>
<h3 id="13-creant-contenidors">1.3. Creant contenidors</h3>
<p>Per a crear i arrancar un contenidor a partir d'una imatge el comandament és <code>docker run nom_imatge</code>.</p>
<p><img alt="Docker" src="../img/Docker_run.png" /></p>
<p>Pot observar-se que <strong>primer es descarrega i desprès l'executa</strong>. Si ho executem varies vegades, podem observar que està creant-se cada cop un contenidor distint.</p>
<p><img alt="Docker" src="../img/Docker_run_1.png" /></p>
<p>Això si és per a algo solt no és problema, però pensem en un contenidor que el posem en marxa, guardem certa informació (com un SGBD) i l'aturem. Si el tornem a arrancar (amb <code>docker run</code>) es perdrà tot el que teniem, ja que es crea de nou.</p>
<p>La millor solució és assignar-li un nom:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>nom_contenidor<span class="w"> </span><span class="o">[</span>opcions<span class="o">]</span><span class="w"> </span>-d<span class="w"> </span>nom_imatge
</code></pre></div></td></tr></table></div>
<p>i per a següents vegades que l'executem, simplement arrancar-lo, amb start:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>docker<span class="w"> </span>start<span class="w"> </span>nom_contenidor
</code></pre></div></td></tr></table></div>
<p>Podem veure els contenidors que tenim en marxa amb <code>docker ps</code>. Quan vullguem aturar-lo podem fer-ho amb.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>docker<span class="w"> </span>stop<span class="w"> </span>nom_contenidor
</code></pre></div></td></tr></table></div>
<p>Podeu trobar més informació a la documentació oficial, així com a la documentació adjunta que us facilitem.</p>
<p>Per acabar amb aquest apartat, podem veure una crida més complexa:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>mysql-srv
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span>-p<span class="w"> </span><span class="m">3308</span>:3306
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span>-v<span class="w"> </span>/srv/mysql:/var/lib/mysql
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="s2">&quot;root&quot;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">  </span>-d<span class="w"> </span>mysql
</code></pre></div></td></tr></table></div>
<p>Que realitza:
- un servei en segon pla (<code>-d</code>) de la imatge de <code>mysql</code>. Si no es diu res, agafarà la última versió (<code>mysql:lately</code>)
- Un contenidor de nom  <code>mysql-srv</code>
- Amb una redirecció de ports  (<code>-p</code>) del port 3308 de la màquina amfitriona al port 3306 del contenidor, on escoltarà mysql.
- Munta un volum (<code>-v</code>) on la ruta <code>/srv/mysql</code> es muntarà en <code>/var/lib/mysql</code>.
- S'assigna una variable d'entorn (<code>-e</code>), amb el password del administrador de mysql.</p>
<h3 id="14-crear-els-nostres-contenidors-dockerfile-i-docker-compose">1.4. Crear els nostres contenidors <code>Dockerfile</code> i <code>docker-compose</code></h3>
<p>Per a crear un contenidor personalitzat, hi han diverses maneres de fer-ho. La complicada és: creem un contenidor amb la imatge buida, l'arranquem, transferim dins d'ell els arxius que necessitem, actualitzem els paquets que calguen, ja el tenim a punt. Com podeu intuir, podem fer-ho millor i més fàcil.</p>
<h3 id="15-dockerfile">1.5. <code>Dockerfile</code></h3>
<p>L'opció és automatitzar tota aquesta tasca en el que es coneix com un <code>Dockerfile</code>. Un <code>Dockerfile</code> és un fitxer de text que conté un <strong>script</strong> amb una sintaxi concreta per a indicar totes les seqüencies per a muntar un contenidor. Ahí per exemple és on podrem muntar un contenidor "net" i afegir-li tot el contingut que necessitem per a desplegar-lo on calga.</p>
<p>Anem a estudiar-ho amb un exemple bàsic. Suposem que volem crear un contenidor amb una distribució d'Ubuntu, a la qual li instal·larem l'editor <code>nano</code> (que no ve per defecte)</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Docker</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu:latest</span><span class="w">          </span><span class="c"># base</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">RUN</span><span class="w"> </span>apt<span class="w"> </span>update<span class="w">              </span>#<span class="w"> </span>RUN<span class="w"> </span>s<span class="err">&#39;</span>executa<span class="w"> </span>en<span class="w"> </span>la<span class="w"> </span>màquina
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">RUN</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nano<span class="w">     </span>#<span class="w"> </span>RUN<span class="w"> </span>s<span class="err">&#39;</span>executa<span class="w"> </span>en<span class="w"> </span>la<span class="w"> </span>màquina
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/usr/src/app        # Carpeta de treball al contenidor</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="k">CMD</span><span class="w"> </span>/bin/bash<span class="w">               </span>#<span class="w"> </span>Programa<span class="w"> </span>que<span class="w"> </span>s<span class="s1">&#39;executa a l&#39;</span>arrancar
</code></pre></div></td></tr></table></div>
<p>Aquest fitxer el guardarem amb el nom <code>Dockerfile</code>. Llavors per crear la imatge i llançar el contenidor amb el nom que vullguem (<code>ubuntunano</code> en aquest cas) podem fer:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1"># crear la imatge</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>docker<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span>nom_arxiu<span class="w"> </span>-t<span class="w"> </span>nom_container<span class="w"> </span>.
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="c1"># llança el contenidor interactivament</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>nom_container
</code></pre></div></td></tr></table></div>
<p>Això crea una imatge i llança el contenidor.</p>
<div class="admonition question">
<p class="admonition-title">Ara et toca a tu</p>
<p>Implementa el contenidor anterior amb el nano fent-ho amb els següents passos:</p>
<ol>
<li>Crea el contenidor sense el nano </li>
<li>Llanç'l i entra a la seua consola. Comprova que no te l'editor nano</li>
<li>Crea'l de nou amb el nano</li>
<li>Llança'l, entra i comprova que ara si tenim el nano.</li>
</ol>
</div>
<h3 id="16-docker-compose">1.6. <code>docker-compose</code></h3>
<p>Cas de necessitar llançar diversos contenidor per a treballar junts, com per exemple un per a una aplicació i altre per a la BBDD, donat que s'han de comunicar, podem recòrrer a <strong>docker-compose</strong>, que ens permet, junt a els Dockerfile, crear i orquestrar contenidors.</p>
<p>Aquesta orquestració s'indicarà en un fitxer anomenat <code>docker-compose.yml</code>. </p>
<details class="note" open="open">
<summary>Note</summary>
<p>El format aquest, anomenat <code>YAML</code> és un nou estandar o variant de formats del tipus atribut-valor com poden ser els fitxers de properties o formats json</p>
</details>
<p>La manera habitual de treball és crear aquest fitxer a l'arrel de la carpeta de treball. En ell a banda de informació de versió i demés, s'especificaran els serveis que anem a muntar, deixant i/o creant una subcarpeta per cada servei que anem a fer. En l'arrel de cada carpeta dels serveis, crearem un <code>Dockerfile</code> amb la configuració personalitzada i pròpia de cada servei. Al <code>docker-compose.yml</code> indicarem els mecanismes de comunicació entre contenidors.</p>
<p><img alt="Docker" src="../img/Docker_run.png" /></p>
<details class="example" open="open">
<summary>Dockerfile per a la BBDD</summary>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>FROM mysql_latest
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>ENV MYSQL_ROOT_PASSWORD toor
</code></pre></div></td></tr></table></div>
</details>
<p>Carrega la última versió de mysql i li assigna el password a l'administrador</p>
<details class="example" open="open">
<summary>Dockerfile per aplicació web Python</summary>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>FROM python:3
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>WORKDIR /usr/src/app
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>COPY requirements.txt ./
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>RUN pip install --no-cache-dir -r requirements.txt
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>COPY . .
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>CMD [ &quot;python&quot;, &quot;app.py&quot; ]
</code></pre></div></td></tr></table></div>
</details>
<p>On l'anterior:</p>
<ul>
<li>Carrega la versió 3 de python</li>
<li>Establix la carpeta de treball dins del contenidor</li>
<li>Copia el fitxer de text <code>requirements.txt</code>. Aquest fitxer conté les dependències de l'aplicació python.</li>
<li>Instal·la dits requeriments</li>
<li>Aquest copy copia TOT el de l'arrel de la carpeta de treball (el projecte) a la carpeta de treball dins del contenidor (<code>/usr/src/app</code>)</li>
<li>Per últim, arranca l'aplicació</li>
</ul>
<details class="example" open="open">
<summary>docker-compose.yml que munta els dos anteriors</summary>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>version: &#39;3&#39;
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>services:
<a id="__codelineno-8-3" name="__codelineno-8-3"></a>  web:
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>    build: ./web
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>    ports:
<a id="__codelineno-8-6" name="__codelineno-8-6"></a>      - &quot;5000:5000&quot;
<a id="__codelineno-8-7" name="__codelineno-8-7"></a>    links:
<a id="__codelineno-8-8" name="__codelineno-8-8"></a>      - db
<a id="__codelineno-8-9" name="__codelineno-8-9"></a>  db:
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>    build: ./db
</code></pre></div></td></tr></table></div>
</details>
<p>Respecte a l'anterior:</p>
<ul>
<li>La versió és opcional</li>
<li>Es defineixen dos serveis:</li>
<li><code>web</code>:<ul>
<li>S'indica que dins de la subcarpeta <code>/web</code> estarà el dockerfile</li>
<li>Aquest contenidor deixarà exposat el port 5000</li>
<li>Aquest contenidor tindrà un enllaç per a comunicar-se directament amb el contenidor <code>db</code>. Això vol dir que, dins del contenidor <code>web</code>, on posem <code>db</code> està referint-se a l'adreça interna del contenidor de la base de dades. Això també passarà dins del programa</li>
</ul>
</li>
<li><code>db</code><ul>
<li>S'indica que dins de la subcarpeta <code>/web</code> estarà el dockerfile</li>
</ul>
</li>
</ul>
<div class="admonition info">
<p class="admonition-title">I un cop fet?</p>
<p>Un cop creada la estructura de carpetes, i demés:</p>
<ul>
<li>Per a crear el pack de contenidors, farem un <code>docker-compose build</code></li>
<li>Per a llançar el pack de contenidors, farem un <code>docker-compose up</code></li>
</ul>
</div>
<h3 id="17-contenidors-de-bbdd-amb-mongodb">1.7. Contenidors de BBDD amb <code>mongoDB</code></h3>
<p>Per a treballar amb la base de dades, ens la instal·larem dins d'un contenidor, deixant exposat el seu port per defecte 27017. De mongo podriem estar treballant molt de temps, però estudiarem el més bàsic per treballar, com és connectar-se, importar/exportar col·leccions de documents i les operacions CRUD (Create, Read, Update i Delete).</p>
<p>Per crear el nostre servidor de BBDD mongo ho farem amb el comandament:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>mongodb-srv<span class="w"> </span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span>-e<span class="w"> </span><span class="nv">MONGO_INITDB_ROOT_USERNAME</span><span class="o">=</span><span class="s2">&quot;root&quot;</span><span class="w"> </span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span>-e<span class="w"> </span><span class="nv">MONGO_INITDB_ROOT_PASSWORD</span><span class="o">=</span><span class="s2">&quot;toor&quot;</span><span class="w"> </span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span>-p<span class="w"> </span><span class="m">27017</span>:27017<span class="w"> </span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span>-d<span class="w"> </span>mongo
</code></pre></div></td></tr></table></div>
<details class="warning" open="open">
<summary>Atenció</summary>
<ul>
<li>Les dades de connexió son <code>root</code> amb password <code>toor</code></li>
<li>El port 27017 de la màquina amfitriona es redirigeix al port per defecte dins del contenidor</li>
<li>Per a aturar i arrancar de nou el mateix contenidor ho farem amb <code>docker start|stop mongodb-srv</code></li>
</ul>
</details>
<h2 id="2-mongodb">2. mongoDB</h2>
<p>MongoDB és una base de dades orientada a documents, basada en l'emmagatzemament de les seues estructures de dades en documents de tipus <code>JSON</code> amb un esquema dinàmic. Tot i que començà el desenvolupament per l'empresa <em>10gen</em>, avui en dia és un projecte de codi obert, amb una gran comunitat d'usuaris.</p>
<p>Un servidor MongoDB pot tindre <strong>diverses bases de dades</strong>, i cadascuna d'elles té un conjunt de <strong>col·lecions</strong>, que podríem equiparar a les taules d'una BD relacional. Cada col·lecció emmagatzema un conjunt de documents JSON, format per atributs clau-valor, que vindríen a ser els registres d'una base de dades relacional.</p>
<p>A grans trets, podríem establir les següents relacions:</p>
<table>
<thead>
<tr>
<th>Model relacional</th>
<th>MongoDB</th>
</tr>
</thead>
<tbody>
<tr>
<td>BD Relacional</td>
<td>BD Orientada a documents</td>
</tr>
<tr>
<td>Taula</td>
<td>Col·lecció</td>
</tr>
<tr>
<td>Registre/Fila</td>
<td>Document JSON</td>
</tr>
<tr>
<td>Atributs/Columnes</td>
<td>Claus del document JSON</td>
</tr>
</tbody>
</table>
<p>Veiem un xicotet exemple de la col·leció <strong><em>Pelis</em></strong> amb dos documents:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JSON</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="p">[</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="err">_id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="err">episodi</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;IV&quot;</span><span class="p">,</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="kc">t</span><span class="err">i</span><span class="kc">t</span><span class="err">ol</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A new Hope&quot;</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="err">year</span><span class="p">:</span><span class="w"> </span><span class="mi">1977</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="err">direc</span><span class="kc">t</span><span class="err">or</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">        </span><span class="kc">n</span><span class="err">om</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;George&quot;</span><span class="p">,</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">        </span><span class="err">cog</span><span class="kc">n</span><span class="err">oms</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;Lucas&quot;</span><span class="p">,</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">        </span><span class="err">a</span><span class="kc">n</span><span class="err">y_</span><span class="kc">na</span><span class="err">ixeme</span><span class="kc">nt</span><span class="p">:</span><span class="w"> </span><span class="mi">1944</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="p">},</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="p">{</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">     </span><span class="err">_id</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">    </span><span class="kc">t</span><span class="err">i</span><span class="kc">t</span><span class="err">ol</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Rogue One. A Star Wars Story.&quot;</span><span class="p">,</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">    </span><span class="err">year</span><span class="p">:</span><span class="w"> </span><span class="mi">2016</span><span class="p">,</span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">    </span><span class="err">direc</span><span class="kc">t</span><span class="err">or</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">        </span><span class="kc">n</span><span class="err">om</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Gareth&quot;</span><span class="p">,</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">        </span><span class="err">cog</span><span class="kc">n</span><span class="err">oms</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;Edwards&quot;</span><span class="p">,</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">        </span><span class="err">a</span><span class="kc">n</span><span class="err">y_</span><span class="kc">na</span><span class="err">ixeme</span><span class="kc">nt</span><span class="p">:</span><span class="w"> </span><span class="mi">1975</span><span class="p">,</span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">        </span><span class="kc">na</span><span class="err">cio</span><span class="kc">nal</span><span class="err">i</span><span class="kc">tat</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;britànica&quot;</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="p">}]</span>
</code></pre></div></td></tr></table></div>
<p>Com veiem, cada document, de tipus pel·lícula té els seus propis atributs, els quals no tenen per què coincidir entre ells. Una altra característica, es que, com podem vore, tenim la informació sobre el director dins el propi document, i no en un altre document i relacionada amb aquest, com sería el cas de les taules.</p>
<h3 id="21-json-i-bson">2.1. JSON i BSON</h3>
<p>Com ja sabem, la unitat bàsica d'informació amb què treballa MongoDB és el <strong>document</strong>, que seria l'equivalent a un <em>registre</em> en un model relacional. Es tracta de <strong>documents JSON</strong>, formats per parells <strong>clau-valor</strong> i que representen la informació d'una manera força intuïtiva. Els servidors MongoDB, per la seva banda, emmagatzemaran aquestes dades en format <strong>BSON</strong> (JSON binari), un format de serialització binari.</p>
<p>Pel que fa als documents JSON per a MongoDB, cal tenir en compte alguns aspectes:</p>
<ul>
<li>Pel que fa a les claus:</li>
<li>No poden ser nules.</li>
<li>Poden contenir en qualsevol caràcter UTF-8, excepte els caràcters <code>.</code> o <code>$</code>.</li>
<li>Distingeixen entre majúscules i minúscules.</li>
<li>Han de ser <strong>únics</strong> dins del mateix document.</li>
<li>Pel que fa als teus valors:</li>
<li>Poden ser de qualsevol tipus permesos: enter, real, text, booleà, NULL, Objecte o Array</li>
<li>Pel que fa al document:</li>
<li>Ha de tenir un camp <code>_id</code>, amb un valor únic, que actuarà com a identificador del document.</li>
<li>Si no especifiquem aquesta clau, MongoDB la generarà automàticament, amb un objecte de tipus <code>ObjectId</code>.</li>
</ul>
<p><img alt="Resum del tipus de dades" src="../img/Tipus_Dades_Mongo.png" /></p>
<p>i respecte als identificadors que insereix mongo automàticament:</p>
<p><img alt="ObjectID" src="../img/ObjectID.png" /></p>
<h3 id="22-importar-i-exportar-colleccions">2.2. Importar i exportar col·leccions</h3>
<p>Un cop tenim instal·lat el servidor, necessitem accedir a ell per a crear, manipular i consultar informació. Per poder fer-ho necessite un client per a la base de dades. Mongo ens ofereix ferramentes per a connectar-se per consola, que les <code>database-tools</code> i podeu trobar documentació ací <a href="https://www.mongodb.com/docs/database-tools/">https://www.mongodb.com/docs/database-tools/</a> de com fer-les servir. Bàsicament aquestes eines ens permeten el importar col·leccions a la BBDD (mongoimport), extreure les cole·leccions (mongoexport) i connectar-se al servidor amb un shell interactio (mongo).</p>
<p>Per a importar una col·lecció de documents, farem servir el comandament <code>mongoimport</code>, amb la sintaxis
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span>
<span class="normal"><a href="#__codelineno-11-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>mongoimport &lt;options&gt; &lt;connection-string&gt; &lt;file&gt;
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>#     més detallat
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>mongoimport --uri &#39;mongodb://servidor:port&#39; \
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>  --username=&#39;XXX&#39; --password=&#39;YYY&#39; --authenticationDatabase=admin \
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>  --db nom_db --collection nom_col --file restaurants.json [--drop]
</code></pre></div></td></tr></table></div></p>
<p>Tenir en compte:</p>
<ul>
<li>Si la BBDD no existeix, es crearà.</li>
<li>Si la col·lecció no existeix la crearà</li>
<li>Si la col·lexió existeix, afegira els elements del fitxer, a menys que posem l'opció  <code>--drop</code>, que elimina la col·lecció abans de refer-la</li>
</ul>
<p>Si volem exportar una col·lecció, l'equivalen seria:
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>mongoexport<span class="w"> </span>--uri<span class="w"> </span><span class="s1">&#39;mongodb://servidor:port&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">  </span>--username<span class="o">=</span><span class="s1">&#39;XXX&#39;</span><span class="w"> </span>--password<span class="o">=</span><span class="s1">&#39;YYY&#39;</span><span class="w"> </span>--authenticationDatabase<span class="o">=</span>admin<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span>--db<span class="w"> </span>nom_db<span class="w"> </span>--collection<span class="w"> </span>nom_col<span class="w"> </span>--out<span class="w"> </span>nou_arxiu.json<span class="w"> </span>
</code></pre></div></td></tr></table></div></p>
<h3 id="23-inserir-documents">2.3. Inserir documents</h3>
<p>El comandament per a inserir un document pot ser:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">insertOne</span><span class="p">({</span><span class="nb">document</span><span class="p">})</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">insertMany</span><span class="p">([{</span><span class="nx">doc1</span><span class="p">},{</span><span class="nx">doc2</span><span class="p">}])</span>
</code></pre></div></td></tr></table></div>
<p>Es retornen els ObjectID dels elements inserits. Espai que com mongo no te estructura es permet qualssevol inserció com a vàlida.</p>
<h3 id="24-consultes-de-documents">2.4. Consultes de documents</h3>
<p>Per a fer consultes farem servir la sintaxi:
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nx">db</span><span class="p">.</span><span class="nx">colleccio</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">criteri_en_format_JSON</span><span class="p">}[{</span><span class="nx">camps_a_mostrar</span><span class="p">}]);</span>
</code></pre></div></td></tr></table></div></p>
<p>on:</p>
<ul>
<li>El criteri és un json on especifiquem els valors de la búsqueda, com un json</li>
<li>Els camps a mostrar indiquem tots aquells camps que volem mostrar com <code>camp:1</code> o <code>camp:0</code>. Aquest camp és opcional, i es mostren tots cas de no posar-ho</li>
</ul>
<details class="example" open="open">
<summary>Exemples autoexplicats de consultes</summary>
<p>Imaginem que tenim una col·lecció de pel·lícules amb l'estructura vista anteriorment
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c1">// Ho mostra tot de totes les pelis</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">()</span><span class="w">   </span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="c1">// pelis de l&#39;any 1977</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">year</span><span class="o">:</span><span class="mf">1977</span><span class="p">})</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="c1">// pelis de l&#39;any 1977, sols el nom de la peli</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">year</span><span class="o">:</span><span class="mf">1977</span><span class="p">},{</span><span class="nx">name</span><span class="o">:</span><span class="mf">1</span><span class="p">})</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="c1">// pelis de l&#39;any 1977, sols el nom de la peli (sense el _id)</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">year</span><span class="o">:</span><span class="mf">1977</span><span class="p">},{</span><span class="nx">name</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="nx">_id</span><span class="o">:</span><span class="mf">0</span><span class="p">})</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="c1">// pelis de l&#39;any 1977, dirigides per directors de nom &quot;George&quot;</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="c1">// atributs dins d&#39;objectes entre cometes</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">year</span><span class="o">:</span><span class="mf">1977</span><span class="p">,</span><span class="s2">&quot;director.nom&quot;</span><span class="o">:</span><span class="s2">&quot;George&quot;</span><span class="p">}})</span>
</code></pre></div></td></tr></table></div></p>
</details>
<p>Per a fer consultes més complexes podem fer servir els operadors de comparació:</p>
<table>
<thead>
<tr>
<th>Operador</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$eq</code></td>
<td>Igual</td>
</tr>
<tr>
<td><code>$neq</code></td>
<td>Distint</td>
</tr>
<tr>
<td><code>$lt</code></td>
<td>Menor que</td>
</tr>
<tr>
<td><code>$lte</code></td>
<td>Menor o igual que</td>
</tr>
<tr>
<td><code>$gt</code></td>
<td>Major que</td>
</tr>
<tr>
<td><code>$gte</code></td>
<td>Major o igual que</td>
</tr>
</tbody>
</table>
<p>i llavors</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span>
<span class="normal"><a href="#__codelineno-16-7">7</a></span>
<span class="normal"><a href="#__codelineno-16-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1">// per a fer clar operador valor s&#39;escriurà</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="nx">db</span><span class="p">.</span><span class="nx">colleccio</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">clau</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$operador</span><span class="o">:</span><span class="nx">valor</span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="c1">// pelis anterios al  1980, sols el nom de la peli</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">year</span><span class="o">:</span><span class="p">{</span><span class="nx">$leq</span><span class="o">:</span><span class="mf">1980</span><span class="p">}},{</span><span class="nx">name</span><span class="o">:</span><span class="mf">1</span><span class="p">})</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="c1">// pelis que no son de &quot;George&quot;</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="s2">&quot;director.nom&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">$neq</span><span class="o">:</span><span class="s2">&quot;George&quot;</span><span class="p">}})</span>
</code></pre></div></td></tr></table></div>
<p>No entrarem en més detall en consultes més complexes, ja que no correspon al curs.</p>
<h4 id="241-ordenacio">2.4.1. Ordenació</h4>
<p>El resultat d'una consulta sempre serà un array de documents, o un sol en cas de que sol se'n retorne un. Moltes vegades voldrem ordenar-ho per veure els resultat d'alguna manera. Per a fer-ho, no existeixen ferramentes dins de la consulta, però podem recòrrer al llenguatge <code>javascript</code>, que és el que enten mongoDB, i invocar al mètode <code>sort()</code> que tenen les col·leccions. </p>
<p>La funció <code>llista.sort({criteri_ordenació})</code> aplica el criteri d'ordenació a la llista. Aquest criteri és un objecte amb la estructura <code>{clau_ord:[1|-1]}</code>. El que fa es ordenar la llista per l'atribut <code>clau_ord</code>, sent ascendent si posem un 1 o descendent si posem un -1. Si posem més d'un atribut, s'ordenarà pel primer, i en cas d'empat pel segon, i així.</p>
<details class="example" open="open">
<summary>Examples d'ordenació</summary>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span>
<span class="normal"><a href="#__codelineno-17-7">7</a></span>
<span class="normal"><a href="#__codelineno-17-8">8</a></span>
<span class="normal"><a href="#__codelineno-17-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="c1">// totes les películes, primer la més recent</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">sort</span><span class="p">({</span><span class="nx">year</span><span class="o">:-</span><span class="mf">1</span><span class="p">})</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="c1">// les películes ordenades per director. Per al mateix director les mostra</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="c1">// en ordre ascendent</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="nx">db</span><span class="p">.</span><span class="nx">pelis</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">sort</span><span class="p">({</span><span class="nx">director</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="nx">year</span><span class="o">:</span><span class="mf">1</span><span class="p">})</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="c1">// comandes ordenades de menys a més preu</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="nx">db</span><span class="p">.</span><span class="nx">comandes</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">sort</span><span class="p">({</span><span class="nx">preu</span><span class="o">:</span><span class="mf">1</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="25-actualitzacions">2.5. Actualitzacións</h3>
<p>Per a modificar algun registre que existeix prèviament en la BBDD, es farà amb el <code>update</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="nx">db</span><span class="p">.</span><span class="nx">colection</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="nx">criteri_busqueda</span><span class="p">},{</span><span class="nx">operació</span><span class="w"> </span><span class="nx">actualització</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<p>Cosideracions:</p>
<ul>
<li>Si no posem el criteri de búsqueda, deixant-lo en blanc (<code>{}</code>) s'actualitzaràn tots els documents.</li>
<li>
<p>La operació d'actualització pot ser de varios tipus: </p>
</li>
<li>
<p><code>$set</code> estableix un valor a un atribut. Si existeix el modifica, i si no existeix l'afig</p>
</li>
<li><code>$unset</code> slimina un atribut del document</li>
<li><code>$inc</code> incrementa l'atribut tant com indiquem. Sols per a números</li>
<li><code>$push</code> afig un element a l'atribut, cas de ser un vector</li>
<li><code>$pull</code> elimina un element(s) de l'atribut, cas de ser un vector</li>
</ul>
<details class="example" open="open">
<summary>Exemple de modificacions</summary>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1">// incrementa en 1 la edat d&#39;una persona</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="nx">db</span><span class="p">.</span><span class="nx">persona</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Pepe&quot;</span><span class="p">},{</span><span class="nx">$inc</span><span class="o">:</span><span class="p">{</span><span class="nx">edad</span><span class="o">:</span><span class="mf">1</span><span class="p">}})</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="c1">// Modifica el sou</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="nx">db</span><span class="p">.</span><span class="nx">empleat</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Pepe&quot;</span><span class="p">},{</span><span class="nx">$set</span><span class="o">:</span><span class="p">{</span><span class="nx">salari</span><span class="o">:</span><span class="mf">1500</span><span class="p">}})</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="c1">// El puja un 10% (a tots els Pepe)</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="nx">db</span><span class="p">.</span><span class="nx">empleat</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Pepe&quot;</span><span class="p">},{</span><span class="nx">$set</span><span class="o">:</span><span class="p">{</span><span class="nx">salari</span><span class="o">:</span><span class="nx">salari</span><span class="o">+</span><span class="nx">salari</span><span class="o">*</span><span class="mf">0.1</span><span class="p">}})</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="c1">// afig un actor a una peli</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="nx">db</span><span class="p">.</span><span class="nx">peli</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;Rogue one&quot;</span><span class="p">},{</span><span class="nx">$push</span><span class="o">:</span><span class="p">{</span><span class="nx">actors</span><span class="o">:</span><span class="s2">&quot;Diego Luna&quot;</span><span class="p">}})</span>
</code></pre></div></td></tr></table></div>
</details>
<p>Com hem comentat, podriem aporfondir molt més, però per al curs és suficient. En els mòdus de dades (BD i BDA) segur que aprofundiu molt més</p>
<h3 id="26-eliminar-bases-de-dades">2.6. Eliminar bases de dades</h3>
<p>Si volem eliminar elements d'una col·lecció, disposem del comandament <code>deleteXXX</code>:</p>
<details class="example" open="open">
<summary>Exemples d'esborrats</summary>
<p>```js
// esborra el primer usuari de 39 anys
db.usuaris.deleteOne({edat:39})</p>
<p>// esborra tots els usuaris de 39 anys
db.usuaris.deleteMany({edat:39})</p>
<p>// esborra tots els usuaris
db.usuaris.deleteMany({})</p>
<p>// elimina tota la col·lecció (documents i estructura)
db.usuaris.drop()</p>
</details>
<p>Si per a lgun motiu volem eliminar una BBDD sencera amb totes les col·leccions que conté, podem fer-ho amb el comandament:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">JavaScript</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="nx">db</span><span class="p">.</span><span class="nx">dropDatabase</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Recordar que si no has seleccionat cap base de dades, eliminarà la base de dades de test (la que està seleccionada per defecte).</p>
<h3 id="27-pymongo-treball-amb-mongodb-des-de-python">2.7. <code>pymongo</code>: treball amb <code>mongoDB</code> des de <code>Python</code></h3>
<p>Per a accedir a mongoDB desde programes es fa servir la estructura <code>mongoclient</code>, i és <code>pymongo</code> la llibreria encarregada de proporcionar-nos dita funcionalitat. Sempre que ens connectem a una BBDD, independentment del llenguatge de programació, el fluxe de treball serà:</p>
<ol>
<li>Carregar el driver (mongoclient)</li>
<li>Crear la cadena de connexió, on indicarem on està el servidor, usuari i contrassenya, i si escau la BBDD</li>
<li>Seleccionar la BBDD per defecte</li>
<li>Crear la consulta|modificació que volem llançar</li>
<li>Executar-la</li>
<li>Recuperar i processar els resultats, si és que hi han</li>
<li>Tancar la connexió abans d'eixir del programa.</li>
</ol>
<p>La documentació completa la podeu trobar a la pàgina oficial <a href="https://pymongo.readthedocs.io/en/stable/">https://pymongo.readthedocs.io/en/stable/</a></p>
<p>Anem a veure ara pas a pas com es faria:
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span>
<span class="normal"><a href="#__codelineno-21-24">24</a></span>
<span class="normal"><a href="#__codelineno-21-25">25</a></span>
<span class="normal"><a href="#__codelineno-21-26">26</a></span>
<span class="normal"><a href="#__codelineno-21-27">27</a></span>
<span class="normal"><a href="#__codelineno-21-28">28</a></span>
<span class="normal"><a href="#__codelineno-21-29">29</a></span>
<span class="normal"><a href="#__codelineno-21-30">30</a></span>
<span class="normal"><a href="#__codelineno-21-31">31</a></span>
<span class="normal"><a href="#__codelineno-21-32">32</a></span>
<span class="normal"><a href="#__codelineno-21-33">33</a></span>
<span class="normal"><a href="#__codelineno-21-34">34</a></span>
<span class="normal"><a href="#__codelineno-21-35">35</a></span>
<span class="normal"><a href="#__codelineno-21-36">36</a></span>
<span class="normal"><a href="#__codelineno-21-37">37</a></span>
<span class="normal"><a href="#__codelineno-21-38">38</a></span>
<span class="normal"><a href="#__codelineno-21-39">39</a></span>
<span class="normal"><a href="#__codelineno-21-40">40</a></span>
<span class="normal"><a href="#__codelineno-21-41">41</a></span>
<span class="normal"><a href="#__codelineno-21-42">42</a></span>
<span class="normal"><a href="#__codelineno-21-43">43</a></span>
<span class="normal"><a href="#__codelineno-21-44">44</a></span>
<span class="normal"><a href="#__codelineno-21-45">45</a></span>
<span class="normal"><a href="#__codelineno-21-46">46</a></span>
<span class="normal"><a href="#__codelineno-21-47">47</a></span>
<span class="normal"><a href="#__codelineno-21-48">48</a></span>
<span class="normal"><a href="#__codelineno-21-49">49</a></span>
<span class="normal"><a href="#__codelineno-21-50">50</a></span>
<span class="normal"><a href="#__codelineno-21-51">51</a></span>
<span class="normal"><a href="#__codelineno-21-52">52</a></span>
<span class="normal"><a href="#__codelineno-21-53">53</a></span>
<span class="normal"><a href="#__codelineno-21-54">54</a></span>
<span class="normal"><a href="#__codelineno-21-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c1"># 1. Carregar el driver</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="kn">from</span> <span class="nn">pymongo</span> <span class="kn">import</span> <span class="n">MongoClient</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="c1"># 2. Crear la cadena de connexió, on indicarem on està el servidor, usuari i contrassenya,</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="c1"># i si escau la BBDD</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="c1">## Per defecte sense credencials</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">()</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="c1">## Per defecte sense credencials</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">27017</span><span class="p">)</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="c1">## Amb cadena, sense credencials</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;mongodb://localhost:27017/&quot;</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="c1">## Amb cadena, amb credencials</span>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;mongodb://user:password@localhost:27017/default_db?authSource=admin&quot;</span>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="c1">## Amb cadena i variables</span>
<a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="n">user</span><span class="o">=</span><span class="s2">&quot;root&quot;</span>
<a id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;toor&quot;</span>
<a id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="n">ddbb</span><span class="o">=</span><span class="s2">&quot;pelis&quot;</span>
<a id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="n">server</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span>
<a id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="n">port</span><span class="o">=</span><span class="s2">&quot;27017&quot;</span>
<a id="__codelineno-21-27" name="__codelineno-21-27"></a><span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;mongodb://</span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1">@</span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">?authSource=admin&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="n">passwd</span><span class="p">,</span><span class="n">server</span><span class="p">,</span><span class="n">port</span><span class="p">,</span><span class="n">ddbb</span><span class="p">)</span>
<a id="__codelineno-21-28" name="__codelineno-21-28"></a><span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<a id="__codelineno-21-29" name="__codelineno-21-29"></a>
<a id="__codelineno-21-30" name="__codelineno-21-30"></a><span class="c1"># 2.1 Seleccionar o canviar la BBDD per defecte.</span>
<a id="__codelineno-21-31" name="__codelineno-21-31"></a><span class="c1"># En aquestes ordres seleccionem la BBDD</span>
<a id="__codelineno-21-32" name="__codelineno-21-32"></a><span class="n">db</span><span class="o">=</span><span class="n">client</span><span class="p">[</span><span class="s2">&quot;pelis&quot;</span><span class="p">]</span>
<a id="__codelineno-21-33" name="__codelineno-21-33"></a>
<a id="__codelineno-21-34" name="__codelineno-21-34"></a><span class="n">db</span><span class="o">=</span><span class="n">client</span><span class="p">[</span><span class="s2">&quot;restaurants&quot;</span><span class="p">]</span>
<a id="__codelineno-21-35" name="__codelineno-21-35"></a>
<a id="__codelineno-21-36" name="__codelineno-21-36"></a><span class="c1"># 3. Operem sobre la BBDD</span>
<a id="__codelineno-21-37" name="__codelineno-21-37"></a>
<a id="__codelineno-21-38" name="__codelineno-21-38"></a><span class="c1"># Seleccionem amb quina colecció dins de la BBDD anem a treballar</span>
<a id="__codelineno-21-39" name="__codelineno-21-39"></a><span class="n">collection</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">nom_coleccio</span>
<a id="__codelineno-21-40" name="__codelineno-21-40"></a>
<a id="__codelineno-21-41" name="__codelineno-21-41"></a><span class="c1"># 4. i 5. Fem la consulta i/o operació i la executem</span>
<a id="__codelineno-21-42" name="__codelineno-21-42"></a><span class="c1"># tota la col·lecció</span>
<a id="__codelineno-21-43" name="__codelineno-21-43"></a><span class="n">cursor</span><span class="o">=</span><span class="n">collection</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
<a id="__codelineno-21-44" name="__codelineno-21-44"></a><span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-21-45" name="__codelineno-21-45"></a>  <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
<a id="__codelineno-21-46" name="__codelineno-21-46"></a>
<a id="__codelineno-21-47" name="__codelineno-21-47"></a><span class="c1"># o be el primer document que te 24 anys</span>
<a id="__codelineno-21-48" name="__codelineno-21-48"></a><span class="n">filtre</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;edat&quot;</span><span class="p">:</span><span class="mi">24</span><span class="p">}</span>
<a id="__codelineno-21-49" name="__codelineno-21-49"></a><span class="n">doc</span><span class="o">=</span><span class="n">collection</span><span class="o">.</span><span class="n">find_one</span><span class="p">(</span><span class="n">filtre</span><span class="p">)</span>
<a id="__codelineno-21-50" name="__codelineno-21-50"></a><span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
<a id="__codelineno-21-51" name="__codelineno-21-51"></a>
<a id="__codelineno-21-52" name="__codelineno-21-52"></a><span class="c1"># o be aplicar un descompte</span>
<a id="__codelineno-21-53" name="__codelineno-21-53"></a><span class="n">filtre</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;edat&quot;</span><span class="p">:</span><span class="mi">24</span><span class="p">}</span>
<a id="__codelineno-21-54" name="__codelineno-21-54"></a><span class="n">modifica</span><span class="o">=</span><span class="p">{</span><span class="err">$</span><span class="nb">set</span><span class="p">:{</span><span class="s2">&quot;descompte&quot;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">}}</span>
<a id="__codelineno-21-55" name="__codelineno-21-55"></a><span class="n">collection</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">filtre</span><span class="p">,</span><span class="n">modifica</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="3-mongoengine">3. <code>mongoengine</code></h2>
<p>MongoEngine és un <strong>ODM (Object-Document Mapper)</strong>  per a Python per a treballar amb MongoDB. Pots trobar tots els detalls en <a href="https://mongoengine-odm.readthedocs.io">https://mongoengine-odm.readthedocs.io</a></p>
<p>Un <strong>ODM</strong> (Object-Document Mapper) és un concepte similar al <strong>ORM</strong> (Object-Relational Mapper), però aplicat a bases de dades de documents en lloc de bases de dades relacionals. És una biblioteca o eina que mapeja documents emmagatzemats en bases de dades no relacionals (com MongoDB) a objectes de programació dins d'una aplicació. Això facilita la interacció amb la base de dades, proporcionant un mecanisme per treballar amb els documents com si fossin objectes natius del llenguatge de programació.</p>
<h3 id="31-caracteristiques-principals">3.1. Característiques principals</h3>
<ol>
<li>
<p><strong>Mapeig de documents a objectes:</strong>
   Els documents emmagatzemats en format JSON, BSON o altres formats es converteixen en objectes del llenguatge de programació.</p>
</li>
<li>
<p><strong>Simplificació de la interacció amb la base de dades:</strong>
   L'ODM permet executar operacions com crear, llegir, actualitzar i eliminar (CRUD) sense necessitat d'escriure consultes directes en el llenguatge de la base de dades.</p>
</li>
<li>
<p><strong>Validació i esquemes:</strong>
   Molts ODMs ofereixen eines per definir esquemes que validen els documents abans de guardar-los a la base de dades.</p>
</li>
<li>
<p><strong>Gestió de relacions (si s'escau):</strong>
   Tot i que les bases de dades de documents no són relacionals, molts ODMs permeten definir relacions entre col·leccions de documents.</p>
</li>
</ol>
<h3 id="32-connectant-en-la-bbdd">3.2. Connectant en la BBDD</h3>
<p>Per connectar-se a una instància en execució de mongod, utilitzeu la funció <code>connect()</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">connect</span><span class="p">(</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>    <span class="n">db</span><span class="o">=</span><span class="n">db_name</span><span class="p">,</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a>    <span class="n">username</span><span class="o">=</span><span class="n">db_user</span><span class="p">,</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a>    <span class="n">password</span><span class="o">=</span><span class="n">db_pass</span><span class="p">,</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>    <span class="n">host</span><span class="o">=</span><span class="n">db_host</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Les connexions en MongoEngine es registren globalment i s'identifiquen amb àlies. Si no es proporciona cap àlies durant la connexió, s'utilitzarà "default" com a àlies. Si volem connexions a diverses BBDD hauriem de fer:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="n">connect</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s2">&quot;base1&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;bd1&quot;</span><span class="p">)</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="n">connect</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="s2">&quot;base2&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;bd2&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>posteriorment quan definim els elements a guardar haurem d'indicar l'àlies de la BBDD on el volem guardar.</p>
<h3 id="33-definint-les-nostres-classesdocumnets">3.3. Definint les nostres classes/Documnets</h3>
<p>La idea és crear unes classes en Python que farem servir per a guardar-les directament en els documents de la BBDD mongo. Per a fer-ho definirem els atributs de les classes com a elements <code>Fields</code> de <code>mongoengine</code> especialitzant-los a alguns dels concrets  <code>IntField</code>,<code>FloatField</code>,<code>URLField</code>, <code>StringField</code>. Tens el llistat complet <a href="https://mongoengine-odm.readthedocs.io/guide/defining-documents.html#fields">ací</a></p>
<p>Aquestes classes:</p>
<ul>
<li>han d'heretar de la classe de mongoengine <code>Document</code> per fer servir els mètodes de guardar i demés.</li>
<li>Deuen de definir-se els mètodes a partir de constructors dels tipus comentats anteriorment.</li>
</ul>
<p>Vegem un primer exemple:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kn">from</span> <span class="nn">mongoengine</span> <span class="kn">import</span> <span class="n">Document</span><span class="p">,</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">IntField</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="k">class</span> <span class="nc">Usuari</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a>    <span class="n">nom</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a>    <span class="n">email</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>i el següent usuari serà emmagatzemant en la base dades referenciada en la segona manera:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">class</span> <span class="nc">UsuariBase2</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>    <span class="n">nom</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a>    <span class="n">edat</span> <span class="o">=</span> <span class="n">IntField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">min_value</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a>    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;db_alias&#39;</span><span class="p">:</span> <span class="s1">&#39;bd1&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Ara ja podem operar amb la base de dades, però directament amb els objectes creats. Mirem el següent codi comentat:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span>
<span class="normal"><a href="#__codelineno-26-28">28</a></span>
<span class="normal"><a href="#__codelineno-26-29">29</a></span>
<span class="normal"><a href="#__codelineno-26-30">30</a></span>
<span class="normal"><a href="#__codelineno-26-31">31</a></span>
<span class="normal"><a href="#__codelineno-26-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="c1"># Crear un nou usuari</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="n">nou_usuari</span> <span class="o">=</span> <span class="n">Usuari</span><span class="p">(</span><span class="n">nom</span><span class="o">=</span><span class="s2">&quot;Anna&quot;</span><span class="p">,</span> <span class="n">edat</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">&quot;anna@example.com&quot;</span><span class="p">)</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="c1"># guardem l&#39;usuari</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="n">nou_usuari</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="c1"># Consultar TOTS els usuaris</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="n">usuaris</span> <span class="o">=</span> <span class="n">Usuari</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="k">for</span> <span class="n">usuari</span> <span class="ow">in</span> <span class="n">usuaris</span><span class="p">:</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nom: </span><span class="si">{</span><span class="n">usuari</span><span class="o">.</span><span class="n">nom</span><span class="si">}</span><span class="s2">, Edat: </span><span class="si">{</span><span class="n">usuari</span><span class="o">.</span><span class="n">edat</span><span class="si">}</span><span class="s2">, Email: </span><span class="si">{</span><span class="n">usuari</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="c1"># Consultar TOTS els usuaris que tenen 30 anys</span>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="n">usuaris_30</span> <span class="o">=</span> <span class="n">Usuari</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">edat</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Usuaris de 30 anys&quot;</span><span class="p">)</span>
<a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="k">for</span> <span class="n">usuari</span> <span class="ow">in</span> <span class="n">usuaris_30</span><span class="p">:</span>
<a id="__codelineno-26-17" name="__codelineno-26-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nom: </span><span class="si">{</span><span class="n">usuari</span><span class="o">.</span><span class="n">nom</span><span class="si">}</span><span class="s2">, Email: </span><span class="si">{</span><span class="n">usuari</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-26-18" name="__codelineno-26-18"></a>
<a id="__codelineno-26-19" name="__codelineno-26-19"></a>
<a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="c1"># Modificar un document existent</span>
<a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="n">usuari_modificat</span> <span class="o">=</span> <span class="n">Usuari</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">nom</span><span class="o">=</span><span class="s2">&quot;Joan&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="k">if</span> <span class="n">usuari_modificat</span><span class="p">:</span>
<a id="__codelineno-26-23" name="__codelineno-26-23"></a>    <span class="n">usuari_modificat</span><span class="o">.</span><span class="n">edat</span> <span class="o">=</span> <span class="mi">31</span>
<a id="__codelineno-26-24" name="__codelineno-26-24"></a>    <span class="n">usuari_modificat</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a id="__codelineno-26-25" name="__codelineno-26-25"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Document modificat amb èxit!&quot;</span><span class="p">)</span>
<a id="__codelineno-26-26" name="__codelineno-26-26"></a>
<a id="__codelineno-26-27" name="__codelineno-26-27"></a>
<a id="__codelineno-26-28" name="__codelineno-26-28"></a><span class="c1"># Eliminar un document</span>
<a id="__codelineno-26-29" name="__codelineno-26-29"></a><span class="n">usuari_a_eliminar</span> <span class="o">=</span> <span class="n">Usuari</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">nom</span><span class="o">=</span><span class="s2">&quot;Joan&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<a id="__codelineno-26-30" name="__codelineno-26-30"></a><span class="k">if</span> <span class="n">usuari_a_eliminar</span><span class="p">:</span>
<a id="__codelineno-26-31" name="__codelineno-26-31"></a>    <span class="n">usuari_a_eliminar</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<a id="__codelineno-26-32" name="__codelineno-26-32"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Document eliminat amb èxit!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Atenció</p>
<ol>
<li>Quan ens connectem, s'indica el nom de la BBDD. Si no existeix es crea la BBDD.</li>
<li>El mateix passa en la col·lecció, si no existeix, la primera vegada que s'insereix es crearà.</li>
<li>Tots els objectes (documents) creats tenen un camp <code>id</code> que conté el objectID assignat per mongo. </li>
</ol>
</div>
<p>Per a búsquedes i filtrat de documents podem fer servir, afegint al nom dels atributs el seguients operadors</p>
<ul>
<li><code>__lt</code>: Menor que (less than).</li>
<li><code>__gte</code>: Major o igual que (greater than or equal to).</li>
<li><code>__lte</code>: Menor o igual que (less than or equal to).</li>
<li><code>__ne</code>: Distint de (not equal).</li>
<li><code>__in</code>: Contingut en una lista de valores.</li>
<li><code>__nin</code>: No contingut en una lista de valores.</li>
<li><code>__contains</code>: un text conté a altre. <code>__icontains</code> per a fer-ho case insensitive.</li>
</ul>
<h2 id="4-annex-protegint-dades-sensibles-els-arxius-env">4. Annex. Protegint dades sensibles. Els arxius <code>.env</code></h2>
<p>Un arxiu <code>.env</code> és un fitxer de text pla que conté variables d'entorn (<em>environment variables</em>) que es poden utilitzar en una aplicació. Es fa servir principalment per emmagatzemar informació sensible o configuracions que <strong>no volem</strong> incloure directament en el codi font, com per exemple:</p>
<ul>
<li>Claus API</li>
<li>Credencials de bases de dades</li>
<li>Configuracions d'entorn (producció, desenvolupament, etc.)</li>
</ul>
<p>Els arxius <code>.env</code> solen tenir el següent format:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a>VARIABLE_1=valor1
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>VARIABLE_2=valor2
</code></pre></div></td></tr></table></div>
<p>Aquest format és senzill, i cada línia defineix una variable d'entorn amb un nom i un valor separats per <code>=</code>. Els comentaris es poden afegir amb <code>#</code> al principi de la línia.</p>
<h3 id="41-per-que-utilitzar-arxius-env">4.1. Per què utilitzar arxius <code>.env</code>?</h3>
<ol>
<li><strong>Seguretat:</strong> Permeten evitar exposar informació sensible al repositori de codi.</li>
<li><strong>Flexibilitat:</strong> Permeten canviar configuracions sense modificar el codi.</li>
<li><strong>Portabilitat:</strong> Faciliten la configuració del projecte en diferents entorns.</li>
</ol>
<h3 id="42-com-utilitzar-arxius-env-amb-python">4.2. Com utilitzar arxius <code>.env</code> amb Python</h3>
<p>El que necessitarem és carregar aquesta informació des dels nostres programes. Vejam com</p>
<p><strong>Instal·lar la biblioteca <code>python-dotenv</code></strong></p>
<p>La forma més fàcil de treballar amb arxius <code>.env</code> a Python és utilitzant la biblioteca <code>python-dotenv</code>. Per instal·lar-la:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a>pip install python-dotenv
</code></pre></div></td></tr></table></div>
<p><strong>Crear un arxiu <code>.env</code></strong></p>
<p>Crea un fitxer <code>.env</code> al directori arrel del projecte amb el següent contingut d'exemple:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a>API_KEY=12345abcde
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>DB_HOST=localhost
<a id="__codelineno-29-3" name="__codelineno-29-3"></a>DB_USER=admin
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>DB_PASS=817267354
</code></pre></div></td></tr></table></div>
<p><strong>Carregar les variables d'entorn en el codi Python</strong></p>
<p>Fes servir la biblioteca <code>python-dotenv</code> per carregar les variables d'entorn al teu programa Python. Aquestes variables estaran disponibles mitjançant <code>os.environ</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="c1"># Carregar les variables de l&#39;arxiu .env en l&#39;entorn del SO actual</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="n">load_dotenv</span><span class="p">()</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="c1"># Accedir a les variables d&#39;entorn</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;API_KEY&quot;</span><span class="p">)</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="n">db_host</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DB_HOST&quot;</span><span class="p">)</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="n">db_user</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DB_USER&quot;</span><span class="p">)</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="n">db_pass</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DB_PASS&quot;</span><span class="p">)</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API Key: </span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database Host: </span><span class="si">{</span><span class="n">db_host</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>Gestionar valors predeterminats</strong></p>
<p>Si una variable no es troba definida al fitxer <code>.env</code>, pots especificar un valor predeterminat:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;API_KEY&quot;</span><span class="p">,</span> <span class="s2">&quot;default_key&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>Evitar que l'arxiu <code>.env</code> es publiqui a github</strong></p>
<p>Afegeix el fitxer <code>.env</code> al <code>.gitignore</code> per evitar que sigui inclòs en el control de versions:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a># Arxiu .gitignore
<a id="__codelineno-32-2" name="__codelineno-32-2"></a>.env
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>